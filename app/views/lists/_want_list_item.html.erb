<% lists.each do |list| %>
	<tr>
		<td><%= list.title %></td>
		<td><%= list.genre.name %></td>
		<td><%= list.media %></td>
		<td><% if list.start_time.present? %>
				<% date = list.start_time %>
				<%= date.strftime("%Y年%m月%d日") %>
			<% end %>
		</td>
		<!-- 観たへ追加ボタンを押すとモーダルで評価や感想を入力できる -->
		<td><button type="button" class="btn btn-primary mt-5" data-toggle="modal" data-target="#post">観たへ追加</button>
			<div class="modal fade" id="post" tabindex="-1" role="dialog" aria-hidden="true">
			    <div class="modal-dialog" role="document">
			      <div class="modal-content">
			      	<h4><%= list.title %></h4>
			      	<p><%= list.genre.name %></p>
			        <%= form_for(list, url: user_list_path(id: list.id)) do |f| %>
			          <div class="modal-body">
			          	<!-- どのリストかを判断するためにパラメーターに:list_idを渡す -->
			          	<%= hidden_field_tag :list_id, "#{list.id}" %>

			          	<%= f.label :media %>
			            <%= f.text_field :media, autofocus: true, placeholder: "CX Netflixなど" %>

			            <%= f.label :start_time %>
			            <%= f.date_field :start_time %>

						<div class="field" id="star">
						    <%= f.label :rate %>
						    <%= f.hidden_field :rate, id: :review_star %>
						</div>

			            <%= f.label :impression %>
			            <%= f.text_field :impression %>
			          </div>
			          <div class="modal-footer">
			            <button type="button" class="btn btn-secondary" data-dismiss="modal">閉じる</button>
			            <%= f.submit "観たへ追加", class: "btn btn-primary form_submit" %>
			          </div>
			        <% end %>
			      </div>
			    </div>
			</div>
		</td>
		<td><%= link_to '削除', user_list_path(id: list.id), method: :delete %></td>
	</tr>
<% end %>

<!-- 評価機能 -->
<script>
$('#star').raty({
  size     : 36,
  starOff:  '<%= asset_path('star-off.png') %>',
  starOn : '<%= asset_path('star-on.png') %>',
  starHalf : '<%= asset_path('star-half.png') %>',
  scoreName: 'list[rate]',
  harf: true,
});
</script>