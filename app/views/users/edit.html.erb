<div class="container">
  <div class="row">
    <h2 class="col-xs-4 col-xs-offset-1">アカウント情報を変更</h2>
  </div>
  <div class="row">
  	<div class="user-edit-form-all">
  		<%= form_with(model: @user, local: true) do |f| %>
			<div class="form-group">
				<%= f.label :name, 'ユーザーネーム', class: "col-xs-4 col-xs-offset-2" %>
				<div class="col-xs-5 field">
					<%= f.text_field :name, autofocus: true, autocomplete: "name", class: "form-control" %>
				</div>
			</div>

      <div class="form-group">
        <%= f.label :introduction, '自己紹介', class: "col-xs-4 col-xs-offset-2" %>
        <div class="col-xs-5 field">
          <%= f.text_area :introduction, autocomplete: "introduction", class: "form-control" %>
        </div>
      </div>
			<div class="col-xs-4 col-xs-offset-4" style="text-align: center;">
				<p><%= attachment_image_tag @user, :image, :fill, 80, 80, size: "200x200", fallback: "no_image.png", id: "img_prev" %></p>
				<p><label class="btn btn-info btn-md" style="width: 150px;">画像選択
			       <%= f.attachment_field :image, style: "display:none;", id: "product_img" %></label></p>
			</div>
			<div class="actions">
				<%= f.submit "変更する", class: "col-xs-4 col-xs-offset-4 signin-button" %>
	        </div>
  		<% end %>
  	</div>
  </div>
</div>

<!-- 画像を選択したら表示されるように -->
<script type="text/javascript">
  $(function() {
    function readURL(input) {
        if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
    $('#img_prev').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
        }
    }
    $("#product_img").change(function(){
        readURL(this);
    });
  });
</script>